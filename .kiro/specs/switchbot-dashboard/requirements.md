# 要件書

## 概要

SwitchBot Hub 2を中核としたスマートホーム環境を視覚的に管理・操作するためのWebアプリケーションです。室内の温度、湿度、照度といった環境データをリアルタイムで表示し、SwitchBotに接続された家電（照明、エアコンなど）を直感的にコントロールする機能を提供します。

## 要件

### 要件1：環境データのリアルタイム表示

**ユーザーストーリー:** スマートホームユーザーとして、室内の環境状況を常に把握したいので、温度・湿度・照度をリアルタイムで確認できるダッシュボードが欲しい。

#### 受入基準

1. WHEN ダッシュボードにアクセスした時 THEN システムは SwitchBot Hub 2から現在の温度、湿度、照度を取得して表示する
2. WHEN データ更新間隔が設定されている時 THEN システムは設定された間隔（10秒単位）でセンサーデータを自動更新する
3. WHEN センサーデータが更新された時 THEN システムは画面上の表示値をスムーズに更新する

### 要件2：環境データの履歴表示

**ユーザーストーリー:** スマートホームユーザーとして、環境の変化を把握したいので、温度・湿度・照度の履歴をグラフで確認したい。

#### 受入基準

1. WHEN ダッシュボードを表示した時 THEN システムは温度、湿度、照度の履歴データを折れ線グラフで表示する
2. WHEN グラフの表示期間を選択した時 THEN システムは選択された期間（24時間/1週間/1ヶ月）のデータを表示する
3. WHEN 新しいセンサーデータを受信した時 THEN システムはメモリ上の履歴データを更新してグラフに反映する

### 要件3：環境アラート機能

**ユーザーストーリー:** スマートホームユーザーとして、室内環境が適切でない時に気づきたいので、設定した閾値を超えた時にアラートを受け取りたい。

#### 受入基準

1. WHEN 設定画面で温度と湿度の上限・下限値を設定した時 THEN システムは設定値を保存する
2. WHEN センサーデータが設定された閾値を超えた時 THEN システムはダッシュボード上に目立つアラートメッセージを表示する
3. WHEN センサーデータが正常範囲に戻った時 THEN システムはアラート表示を解除する

### 要件4：デバイス自動検出と表示

**ユーザーストーリー:** スマートホームユーザーとして、接続されているデバイスを確認したいので、Hub 2に登録されているデバイス一覧を自動で表示してほしい。

#### 受入基準

1. WHEN ダッシュボードを初期化した時 THEN システムは SwitchBot APIを通じてHub 2に登録されているデバイス一覧を取得する
2. WHEN デバイス一覧を取得した時 THEN システムは照明とエアコンのデバイスをダッシュボード上にカード形式で表示する
3. WHEN デバイス情報が更新された時 THEN システムは表示されているデバイス情報を最新の状態に更新する

### 要件5：照明コントロール機能

**ユーザーストーリー:** スマートホームユーザーとして、外出先からでも照明を操作したいので、Webブラウザから照明のオン・オフと明るさを調整したい。

#### 受入基準

1. WHEN 照明のON/OFFトグルスイッチをクリックした時 THEN システムは照明の電源状態を切り替える
2. WHEN 明るさスライダーを操作した時 THEN システムは照明の明るさを指定されたレベルに調整する
3. WHEN 照明の操作が完了した時 THEN システムは0.5秒以内に操作結果をユーザーに表示する

### 要件6：エアコンコントロール機能

**ユーザーストーリー:** スマートホームユーザーとして、快適な室温を維持したいので、Webブラウザからエアコンの電源、モード、温度設定を操作したい。

#### 受入基準

1. WHEN エアコンのON/OFFボタンをクリックした時 THEN システムはエアコンの電源状態を切り替える
2. WHEN 運転モードボタン（冷房・暖房・除湿・自動）をクリックした時 THEN システムはエアコンの運転モードを変更する
3. WHEN 温度設定ボタンまたはスライダーを操作した時 THEN システムはエアコンの設定温度を変更する
4. WHEN エアコンの操作が完了した時 THEN システムは0.5秒以内に操作結果をユーザーに表示する

### 要件7：レスポンシブデザイン

**ユーザーストーリー:** スマートホームユーザーとして、様々なデバイスから操作したいので、PC、タブレット、スマートフォンで最適化された表示で利用したい。

#### 受入基準

1. WHEN PCブラウザでアクセスした時 THEN システムはグリッドレイアウトで情報をカード形式で表示する
2. WHEN タブレットでアクセスした時 THEN システムは画面サイズに応じてレイアウトを調整する
3. WHEN スマートフォンでアクセスした時 THEN システムは縦スクロール可能な単列レイアウトで表示する

### 要件8：モダンなUI/UX

**ユーザーストーリー:** スマートホームユーザーとして、使いやすく美しいインターフェースを求めているので、モダンでクールなデザインのダッシュボードを利用したい。

#### 受入基準

1. WHEN ダッシュボードを表示した時 THEN システムはダークモードを基調としたモダンなデザインで表示する
2. WHEN UI要素を表示した時 THEN システムは青や緑のアクセントカラーを使用して先進性を演出する
3. WHEN ユーザーが操作した時 THEN システムは直感的で分かりやすいインタラクションを提供する

### 要件9：セキュリティとAPIキー管理

**ユーザーストーリー:** スマートホームユーザーとして、セキュリティを重視するので、APIキーが安全に管理されたシステムを利用したい。

#### 受入基準

1. WHEN システムがSwitchBot APIにアクセスする時 THEN APIトークンとシークレットキーはサーバーサイドで管理される
2. WHEN フロントエンドコードを確認した時 THEN APIキー情報は含まれていない
3. WHEN 環境変数を設定した時 THEN システムは環境変数からAPIキー情報を安全に読み込む