はい、承知いたしました。SwitchBot Hub 2を活用したダッシュボードWebアプリの要件仕様書を作成します。モダンでクールなデザインを意識し、いただいたご要件を網羅した上で、開発をスムーズに進めるために必要な項目を加えて提案します。

-----

## **SwitchBot統合ダッシュボード Webアプリ 要件仕様書**

### **1. 概要**

本ドキュメントは、SwitchBot Hub 2を中核としたスマートホーム環境を視覚的に管理・操作するためのWebアプリケーション（以下、本アプリ）の要件を定義するものです。

本アプリは、室内の温度、湿度、照度といった環境データをリアルタイムで表示し、SwitchBotに接続された家電（照明、エアコンなど）を直感的にコントロールする機能を提供します。これにより、利用者は快適で質の高いスマートライフを実現できます。

### **2. 目的**

  * **環境の可視化:** SwitchBot Hub 2から取得した室内環境データ（温度・湿度・照度）をリアルタイムで表示し、利用者が室内状況を常に把握できるようにする。
  * **リモートコントロール:** 照明やエアコンなどの赤外線リモコン対応家電を、Webブラウザから一元的に操作可能にする。
  * **自動化と通知:** 設定した閾値に基づき、環境の変化をアラートで通知することで、快適な室内環境の維持をサポートする。
  * **優れたUI/UX:** モダンで直感的なデザインにより、誰でも簡単に操作できるユーザー体験を提供する。

### **3. 機能要件**

#### **3.1. ダッシュボード機能**

  * **リアルタイム環境表示:**

      * SwitchBot Hub 2の内蔵センサーから取得した現在の「温度」「湿度」「照度」をダッシュボードのメインエリアに大きく表示する。
      * データの取得間隔をユーザーが設定画面で変更できる機能を持つ。設定範囲は\*\*10秒\*\*単位で設定が可能。

  * **環境データグラフ表示:**

      * 「温度」「湿度」「照度」の履歴データを時間経過がわかる折れ線グラフで表示する。
      * グラフ用の履歴データは、メモリ上に保存し、データベースは使用しない。

#### **3.2. アラート機能**

  * **閾値設定:**
      * 「温度」と「湿度」それぞれに対して、上限値と下限値の閾値をユーザーが設定できる画面を用意する。
  * **アラート通知:**
      * センサーデータが設定された閾値を超えた、または下回った場合に、ダッシュボード上に目立つ形でアラートメッセージを表示する。（例：画面上部の通知バー、該当項目の色変更など）

#### **3.3. デバイスコントロール機能**

  * **デバイスの自動検出と表示:**
      * SwitchBot APIを通じて、Hub 2に登録されている赤外線リモコン対応デバイス（「照明」「エアコン」など）の一覧を自動で取得し、ダッシュボード上に表示する。
  * **照明コントロール:**
      * **ON / OFF:** 電源のオン・オフを切り替えるトグルスイッチを設ける。
      * **明るさ調整:** 明るさを段階的に、またはスライダーUIで調整できる機能を提供する。
  * **エアコンコントロール:**
      * **ON / OFF:** 電源のオン・オフを切り替えるボタンを設ける。
      * **モード切替:** 「冷房」「暖房」「除湿」「自動」などの運転モードを選択できるボタンを設ける。
      * **温度設定:** 設定温度を上げ下げできるボタン、またはスライダーUIを設ける。

### **4. 非機能要件**

#### **4.1. ユーザーインターフェース (UI) / ユーザーエクスペリエンス (UX)**

  * **デザイン:**
      * ダークモードを基調とし、アクセントカラーに青や緑などを用いて先進性を感じさせる**モダンでクールなデザイン**を採用する。
      * 各情報（センサー値、グラフ、デバイス）をカード形式で整理し、グリッドレイアウトで配置することで、視認性とカスタマイズ性を両立させる。
      * レスポンシブデザインを採用し、PC、タブレット、スマートフォンなど、異なるデバイスの画面サイズに最適化された表示を行う。

#### **4.2. パフォーマンス**

  * **応答性:** ユーザーの操作（ボタンクリックなど）から0.5秒以内に画面が応答を返すこと。
  * **データ更新:** 設定された間隔でバックグラウンドでデータを取得し、画面表示をスムーズに更新すること。

#### **4.3. セキュリティ**

  * **APIキー管理:** SwitchBot APIのトークンやシークレットキーは、サーバーサイドで安全に管理し、フロントエンドのコードには含めないこと。環境変数などを用いて管理することを推奨する。

#### **4.4. 拡張性**

  * 将来的にSwitchBotの他のデバイス（カーテン、ボットなど）にも対応できるよう、コンポーネントベースの柔軟な設計にすること。

### **5. 技術仕様（推奨）**

  * **フロントエンド:**
      * **フレームワーク:** React, Vue.js, Svelte などのモダンなJavaScriptフレームワーク
      * **グラフライブラリ:** Chart.js, D3.js など
  * **バックエンド:**
      * **言語:** Node.js (Express), Python (FastAPI), Go など
      * **役割:** SwitchBot APIとの通信を仲介し、APIキーを秘匿する。
  * **API連携:**
      * SwitchBot API V1.1 に準拠して開発を行う。
      * APIリクエストのレート制限を考慮した実装を行うこと。

### **6. 画面構成案（ワイヤーフレーム）**

以下に、PCブラウザで表示した際の画面レイアウト案を示します。

```
+--------------------------------------------------------------------------+
| Header: SwitchBot Dashboard                                              |
+--------------------------------------------------------------------------+
|                                                                          |
|  +----------------------+  +----------------------+  +-----------------+   |
|  | 🌡️ 温度             |  | 💧 湿度             |  | ☀️ 照度        |   |
|  |                      |  |                      |  |                 |   |
|  |  25.4 ℃             |  |  62 %                |  |  850 lx         |   |
|  +----------------------+  +----------------------+  +-----------------+   |
|                                                                          |
|  +--------------------------------------------------------------------+  |
|  | 📈 環境データ推移 (期間: 24h / 1w / 1m )                         |  |
|  |                                                                    |  |
|  | (ここに温度・湿度の折れ線グラフを表示)                               |  |
|  |                                                                    |  |
|  +--------------------------------------------------------------------+  |
|                                                                          |
|  +---------------------------+       +--------------------------------+   |
|  | 💡 照明 (リビング)         |       | ❄️ エアコン (寝室)               |   |
|  |                           |       |                                |   |
|  |  [ ON / OFF ]   明るさ [■■■□□]  |       | [ ON / OFF ]  温度 [ 26℃ ]   |   |
|  |                           |       |                                |   |
|  |                           |       | [冷房] [暖房] [除湿] [自動]    |   |
|  +---------------------------+       +--------------------------------+   |
|                                                                          |
+--------------------------------------------------------------------------+
| Footer: © YourAppName | 設定                                             |
+--------------------------------------------------------------------------+
```

-----